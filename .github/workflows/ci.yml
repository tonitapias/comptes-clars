name: CI Comptes Clars

# Aquest workflow s'executarÃ  cada vegada que facis push a la branca principal
on:
  push:
    branches: [ main, master ]
  pull_request:
    branches: [ main, master ]

jobs:
  validate:
    name: ValidaciÃ³ i Build
    runs-on: ubuntu-latest

    steps:
      - name: ğŸ“¥ Descarregar el codi
        uses: actions/checkout@v4

      - name: âš™ï¸ Configurar Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20' # Utilitzem una versiÃ³ LTS estable
          cache: 'npm'      # AixÃ² fa que les segÃ¼ents execucions siguin molt mÃ©s rÃ pides

      - name: ğŸ“¦ InstalÂ·lar dependÃ¨ncies
        run: npm ci

      - name: ğŸ•µï¸â€â™‚ï¸ Comprovar TypeScript (Sense compilar)
        run: npx tsc --noEmit

      - name: ğŸ—ï¸ Comprovar que el Build de Vite funciona
        run: npm run build

      - name: ğŸ§ª Executar Tests Unitaris
        run: npm run test -- --run